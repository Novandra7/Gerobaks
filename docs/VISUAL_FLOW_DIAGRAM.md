# ðŸ“Š Visual Flow: User-Mitra Pickup System

## ðŸ”„ Complete User Journey

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        USER SIDE                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[User membuka app]
       â†“
[Tap FAB "+" button]
       â†“
[Form: Pilih jenis sampah, jadwal, alamat]
       â†“
[Submit â†’ POST /api/pickup-schedules]
       â†“
[Status: PENDING â³]
       â”‚
       â”‚ (Menunggu mitra...)
       â”‚
       â†“
[ðŸ”” Notifikasi: "Mitra John Doe menerima jadwal Anda!"]
       â†“
[Status auto-update: ON_PROGRESS ðŸš›]
       â”‚
       â”‚ (Display info mitra: nama, telpon, kendaraan)
       â”‚ (Optional: Live tracking di map)
       â”‚
       â†“
[ðŸ”” Notifikasi: "Mitra telah sampai"]
       â†“
[Mitra mengambil sampah...]
       â†“
[ðŸ”” Notifikasi: "Pengambilan selesai! +67 poin"]
       â†“
[Status: COMPLETED âœ…]
       â†“
[Points bertambah: 150 â†’ 217 poin]
       â†“
[Bisa lihat:
 - Foto bukti pengambilan
 - Berat sampah per jenis
 - Rating mitra (optional)]


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       MITRA SIDE                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[Mitra membuka app]
       â†“
[Tab "Jadwal Tersedia"]
       â†“
[GET /api/mitra/pickup-schedules/available]
       â†“
[Melihat list jadwal PENDING:]
  â€¢ Ali - Jl. Sudirman (2.5 km)
  â€¢ Ahmad - Jl. Thamrin (3.1 km)
  â€¢ Budi - Jl. Gatot Subroto (1.8 km)
       â†“
[Tap salah satu jadwal]
       â†“
[GET /api/mitra/pickup-schedules/36]
       â†“
[Detail Page tampilkan:
 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚ ðŸ“ Map dengan pin lokasi        â”‚
 â”‚                                 â”‚
 â”‚ ðŸ‘¤ Ali                          â”‚
 â”‚ ðŸ“± 081234567890                 â”‚
 â”‚ ðŸ  Jl. Sudirman No. 123         â”‚
 â”‚    Jakarta Pusat                â”‚
 â”‚                                 â”‚
 â”‚ ðŸ—‘ï¸  Jenis: B3                   â”‚
 â”‚ â° Jadwal: Rabu, 06:00-08:00    â”‚
 â”‚ ðŸ“ Catatan: Sampah sudah dipilahâ”‚
 â”‚                                 â”‚
 â”‚ [Button: TERIMA JADWAL]         â”‚
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
[Mitra tap "Terima Jadwal"]
       â†“
[POST /api/mitra/pickup-schedules/36/accept]
       â†“
[Backend:
 1. Update status â†’ ON_PROGRESS
 2. Set assigned_mitra_id
 3. Send notification ke User
 4. Broadcast realtime event]
       â†“
[Jadwal pindah ke tab "Jadwal Aktif"]
       â†“
[Button "Mulai Perjalanan" muncul]
       â†“
[Tap "Mulai Perjalanan"]
       â†“
[POST /api/mitra/pickup-schedules/36/start-journey]
       â†“
[Navigation ke lokasi user (Google Maps integration)]
       â†“
[... Perjalanan ...]
       â†“
[Sampai di lokasi]
       â†“
[Tap "Sampai di Lokasi"]
       â†“
[POST /api/mitra/pickup-schedules/36/arrive]
       â†“
[Ambil sampah dari user...]
       â†“
[Tap "Selesai"]
       â†“
[Form Complete Pickup:
 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚ Input Berat Sampah:             â”‚
 â”‚ â€¢ Organik: [3.5] kg             â”‚
 â”‚ â€¢ Anorganik: [2.0] kg           â”‚
 â”‚ â€¢ B3: [1.2] kg                  â”‚
 â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•           â”‚
 â”‚ Total: 6.7 kg                   â”‚
 â”‚                                 â”‚
 â”‚ Upload Foto Bukti (min 1):      â”‚
 â”‚ [ðŸ“· Photo 1] [ðŸ“· Photo 2]       â”‚
 â”‚                                 â”‚
 â”‚ Catatan:                        â”‚
 â”‚ [Selesai tepat waktu]           â”‚
 â”‚                                 â”‚
 â”‚ [Button: KONFIRMASI SELESAI]    â”‚
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
[POST /api/mitra/pickup-schedules/36/complete]
       â†“
[Backend:
 1. Upload photos ke storage
 2. Update status â†’ COMPLETED
 3. Calculate points: 6.7 kg Ã— 10 = 67 poin
 4. User.points += 67
 5. Mitra.total_collections += 1
 6. Send notification ke User
 7. Broadcast event]
       â†“
[Success: "Pengambilan berhasil dicatat!"]
       â†“
[Jadwal pindah ke "Riwayat"]
       â†“
[Mitra bisa ambil jadwal baru]
```

---

## ðŸ—„ï¸ Database State Changes

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TABEL: pickup_schedules (id: 36)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STATE 1: User baru buat jadwal
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
id: 36
user_id: 15
status: "pending"
assigned_mitra_id: NULL
scheduled_pickup_at: "2025-11-13 06:00:00"
waste_type_scheduled: "B3"
notes: "Sampah sudah dipilah"


STATE 2: Mitra accept jadwal
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
id: 36
user_id: 15
status: "on_progress"  â† CHANGED
assigned_mitra_id: 8   â† CHANGED
assigned_at: "2025-11-12 15:30:00"  â† NEW
scheduled_pickup_at: "2025-11-13 06:00:00"
waste_type_scheduled: "B3"
notes: "Sampah sudah dipilah"


STATE 3: Mitra start journey
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
id: 36
user_id: 15
status: "on_progress"
assigned_mitra_id: 8
assigned_at: "2025-11-12 15:30:00"
on_the_way_at: "2025-11-13 05:45:00"  â† NEW
scheduled_pickup_at: "2025-11-13 06:00:00"


STATE 4: Mitra arrive
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
id: 36
user_id: 15
status: "on_progress"
assigned_mitra_id: 8
assigned_at: "2025-11-12 15:30:00"
on_the_way_at: "2025-11-13 05:45:00"
picked_up_at: "2025-11-13 06:05:00"  â† NEW


STATE 5: Mitra complete
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
id: 36
user_id: 15
status: "completed"  â† CHANGED
assigned_mitra_id: 8
assigned_at: "2025-11-12 15:30:00"
on_the_way_at: "2025-11-13 05:45:00"
picked_up_at: "2025-11-13 06:05:00"
completed_at: "2025-11-13 06:20:00"  â† NEW
actual_weights: {"Organik": 3.5, "Anorganik": 2.0, "B3": 1.2}  â† NEW
total_weight: 6.7  â† NEW
pickup_photos: ["url1.jpg", "url2.jpg"]  â† NEW


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TABEL: users (id: 15 - User Ali)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

BEFORE:
points: 150

AFTER (auto-increment by backend):
points: 217  (+67 dari 6.7 kg Ã— 10)


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TABEL: users (id: 8 - Mitra John)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

BEFORE:
total_collections: 42

AFTER:
total_collections: 43  (+1)
```

---

## ðŸ“± UI Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER APP - Activity Page                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

BEFORE (Status: pending):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Jadwal Pengambilan              â”‚
â”‚                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ðŸ“… Rabu, 13 Nov 2025        â”‚ â”‚
â”‚ â”‚ â° 06:00 - 08:00            â”‚ â”‚
â”‚ â”‚ ðŸ—‘ï¸  B3                       â”‚ â”‚
â”‚ â”‚ ðŸ“ Jl. Sudirman No. 123     â”‚ â”‚
â”‚ â”‚                             â”‚ â”‚
â”‚ â”‚ Status: â³ MENUNGGU MITRA   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


AFTER (Status: on_progress):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Jadwal Pengambilan              â”‚
â”‚                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ðŸ“… Rabu, 13 Nov 2025        â”‚ â”‚
â”‚ â”‚ â° 06:00 - 08:00            â”‚ â”‚
â”‚ â”‚ ðŸ—‘ï¸  B3                       â”‚ â”‚
â”‚ â”‚ ðŸ“ Jl. Sudirman No. 123     â”‚ â”‚
â”‚ â”‚                             â”‚ â”‚
â”‚ â”‚ Status: ðŸš› DALAM PERJALANAN â”‚ â”‚
â”‚ â”‚                             â”‚ â”‚
â”‚ â”‚ Mitra:                      â”‚ â”‚
â”‚ â”‚ ðŸ‘¤ John Doe                 â”‚ â”‚
â”‚ â”‚ ðŸ“± 081987654321             â”‚ â”‚
â”‚ â”‚ ðŸš— Truk - B 1234 XYZ        â”‚ â”‚
â”‚ â”‚                             â”‚ â”‚
â”‚ â”‚ [Button: HUBUNGI MITRA]     â”‚ â”‚
â”‚ â”‚ [Button: LACAK LOKASI]      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


AFTER COMPLETED:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Riwayat Pengambilan             â”‚
â”‚                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ âœ… SELESAI                   â”‚ â”‚
â”‚ â”‚ ðŸ“… Rabu, 13 Nov 2025        â”‚ â”‚
â”‚ â”‚ â° Diselesaikan: 06:20      â”‚ â”‚
â”‚ â”‚                             â”‚ â”‚
â”‚ â”‚ Total Berat: 6.7 kg         â”‚ â”‚
â”‚ â”‚ â€¢ Organik: 3.5 kg           â”‚ â”‚
â”‚ â”‚ â€¢ Anorganik: 2.0 kg         â”‚ â”‚
â”‚ â”‚ â€¢ B3: 1.2 kg                â”‚ â”‚
â”‚ â”‚                             â”‚ â”‚
â”‚ â”‚ ðŸŽ Poin Didapat: +67        â”‚ â”‚
â”‚ â”‚                             â”‚ â”‚
â”‚ â”‚ Mitra: John Doe             â”‚ â”‚
â”‚ â”‚ [Button: LIHAT FOTO]        â”‚ â”‚
â”‚ â”‚ [Button: RATING MITRA]      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  MITRA APP - Main Navigation                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Tab 1: Jadwal Tersedia
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Jadwal Tersedia (15)            â”‚
â”‚                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Ali - Jl. Sudirman          â”‚ â”‚
â”‚ â”‚ ðŸ—‘ï¸  B3 | â° 06:00-08:00      â”‚ â”‚
â”‚ â”‚ ðŸ“ 2.5 km dari Anda         â”‚ â”‚
â”‚ â”‚ [LIHAT DETAIL]              â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Ahmad - Jl. Thamrin         â”‚ â”‚
â”‚ â”‚ ðŸ—‘ï¸  Organik | â° 07:00-09:00 â”‚ â”‚
â”‚ â”‚ ðŸ“ 3.1 km dari Anda         â”‚ â”‚
â”‚ â”‚ [LIHAT DETAIL]              â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Tab 2: Jadwal Aktif (My Active)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Jadwal Aktif (1)                â”‚
â”‚                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ðŸš› DALAM PERJALANAN          â”‚ â”‚
â”‚ â”‚                             â”‚ â”‚
â”‚ â”‚ Ali - Jl. Sudirman No. 123  â”‚ â”‚
â”‚ â”‚ ðŸ—‘ï¸  B3 | â° 06:00-08:00      â”‚ â”‚
â”‚ â”‚                             â”‚ â”‚
â”‚ â”‚ [NAVIGASI KE LOKASI]        â”‚ â”‚
â”‚ â”‚ [HUBUNGI USER]              â”‚ â”‚
â”‚ â”‚ [SAMPAI DI LOKASI]          â”‚ â”‚
â”‚ â”‚ [SELESAI]                   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Tab 3: Riwayat
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Riwayat Pengambilan             â”‚
â”‚                                 â”‚
â”‚ Bulan ini: 12 pengambilan       â”‚
â”‚ Total berat: 85.5 kg            â”‚
â”‚                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ âœ… Ali - B3                  â”‚ â”‚
â”‚ â”‚ 13 Nov 2025 | 6.7 kg        â”‚ â”‚
â”‚ â”‚ +67 poin                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ âœ… Ahmad - Organik           â”‚ â”‚
â”‚ â”‚ 12 Nov 2025 | 8.2 kg        â”‚ â”‚
â”‚ â”‚ +82 poin                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ”” Notification Timeline

```
TIME: 15:30:00
EVENT: Mitra accepts schedule
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
USER receives:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸ”” Gerobaks                     â”‚
â”‚                                 â”‚
â”‚ Mitra John Doe menerima         â”‚
â”‚ jadwal pengambilan Anda!        â”‚
â”‚                                 â”‚
â”‚ Kendaraan: Truk - B 1234 XYZ    â”‚
â”‚ Kontak: 081987654321            â”‚
â”‚                                 â”‚
â”‚ Tap untuk detail â†’              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


TIME: 05:45:00
EVENT: Mitra starts journey
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
USER receives:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸ”” Gerobaks                     â”‚
â”‚                                 â”‚
â”‚ Mitra dalam perjalanan          â”‚
â”‚                                 â”‚
â”‚ ETA: 15 menit                   â”‚
â”‚                                 â”‚
â”‚ Tap untuk lacak lokasi â†’        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


TIME: 06:05:00
EVENT: Mitra arrives
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
USER receives:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸ”” Gerobaks                     â”‚
â”‚                                 â”‚
â”‚ Mitra telah sampai di lokasi!   â”‚
â”‚                                 â”‚
â”‚ Silakan serahkan sampah Anda    â”‚
â”‚                                 â”‚
â”‚ Tap untuk detail â†’              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


TIME: 06:20:00
EVENT: Pickup completed
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
USER receives:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸ”” Gerobaks                     â”‚
â”‚                                 â”‚
â”‚ Pengambilan selesai!            â”‚
â”‚                                 â”‚
â”‚ ðŸŽ Anda mendapat +67 poin       â”‚
â”‚                                 â”‚
â”‚ Total berat: 6.7 kg             â”‚
â”‚                                 â”‚
â”‚ Tap untuk lihat detail â†’        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ” Security & Validation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VALIDATION RULES                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Accept Schedule:
âœ“ User harus role: mitra
âœ“ Schedule status = 'pending'
âœ“ assigned_mitra_id = NULL
âœ“ Prevent double-accept (use DB transaction lock)
âœ“ Check mitra tidak punya jadwal active lain (optional)


Complete Pickup:
âœ“ User harus role: mitra
âœ“ Schedule status = 'on_progress'
âœ“ assigned_mitra_id = mitra yang login
âœ“ Minimal 1 foto wajib
âœ“ Total weight > 0
âœ“ Photo max 5MB each
âœ“ Photo format: jpg, png


Cancel Schedule:
âœ“ User harus role: mitra
âœ“ assigned_mitra_id = mitra yang login
âœ“ Status = 'on_progress'
âœ“ Reason wajib diisi
```

---

## ðŸ“Š API Response Time Expectations

```
GET  /available         â†’ < 500ms   (with pagination)
GET  /{id}              â†’ < 200ms   (single record)
POST /accept            â†’ < 300ms   (with notification)
POST /start-journey     â†’ < 200ms
POST /arrive            â†’ < 200ms
POST /complete          â†’ < 1000ms  (with photo upload)
POST /cancel            â†’ < 300ms
```

---

**Dokumentasi lengkap:** `docs/MITRA_PICKUP_SYSTEM.md`  
**Quick reference:** `docs/QUICK_MITRA_API.md`
